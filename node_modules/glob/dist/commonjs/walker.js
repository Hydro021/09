"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.GlobStream = exports.GlobWalker = exports.GlobUtil = void 0;
/**
 * Single-use utility classes to provide functionality to the {@link Glob}
 * methods.
 *
 * @module
 */
const minipass_1 = require("minipass");
const ignore_js_1 = require("./ignore.js");
const processor_js_1 = require("./processor.js");
const makeIgnore = (ignore, opts) => typeof ignore === 'string'
    ? new ignore_js_1.Ignore([ignore], opts)
    : Array.isArray(ignore)
        ? new ignore_js_1.Ignore(ignore, opts)
        : ignore;
/**
 * basic walking utilities that all the glob walker types use
 */
class GlobUtil {
    path;
    patterns;
    opts;
    seen = new Set();
    paused = false;
    aborted = false;
    #onResume = [];
    #ignore;
    #sep;
    signal;
    maxDepth;
    constructor(patterns, path, opts) {
        this.patterns = patterns;
        this.path = path;
        this.opts = opts;
        this.#sep = !opts.posix && opts.platform === 'win32' ? '\\' : '/';
        if (opts.ignore) {
            this.#ignore = makeIgnore(opts.ignore, opts);
        }
        // ignore, always set with maxDepth, but it's optional on the
        // GlobOptions type
        /* c8 ignore start */
        this.maxDepth = opts.maxDepth || Infinity;
        /* c8 ignore stop */
        if (opts.signal) {
            this.signal = opts.signal;
            this.signal.addEventListener('abort', () => {
                this.#onResume.length = 0;
            });
        }
    }
    #ignored(path) {
        return this.seen.has(path) || !!this.#ignore?.ignored?.(path);
    }
    #childrenIgnored(path) {
        return !!this.#ignore?.childrenIgnored?.(path);
    }
    // backpressure mechanism
    pause() {
        this.paused = true;
    }
    resume() {
        /* c8 ignore start */
        if (this.signal?.aborted)
            return;
        /* c8 ignore stop */
        this.paused = false;
        let fn = undefined;
        while (!this.paused && (fn = this.#onResume.shift())) {
            fn();
        }
    }
    onResume(fn) {
        if (this.signal?.aborted)
            return;
        /* c8 ignore start */
        if (!this.paused) {
            fn();
        }
        else {
            /* c8 ignore stop */
            this.#onResume.push(fn);
        }
    }
    // do the requisite realpath/stat checking, and return the path
    // to add or undefined to filter it out.
    async matchCheck(e, ifDir) {
        if (ifDir && this.opts.nodir)
            return undefined;
        let rpc;
        if (this.opts.realpath) {
            rpc = e.realpathCached() || (await e.realpath());
            if (!rpc)
                return undefined;
            e = rpc;
        }
        const needStat = e.isUnknown() || this.opts.stat;
        const s = needStat ? await e.lstat() : e;
        if (this.opts.follow && this.opts.nodir && s?.isSymbolicLink()) {
            const target = await s.realpath();
            /* c8 ignore start */
            if (target && (target.isUnknown() || this.opts.stat)) {
                await target.lstat();
            }
            /* c8 ignore stop */
        }
        return this.matchCheckTest(s, ifDir);
    }
    matchCheckTest(e, ifDir) {
        return e &&
            (this.maxDepth === Infinity || e.depth() <= this.maxDepth) &&
            (!ifDir || e.canReaddir()) &&
            (!this.opts.nodir || !e.isDirectory()) &&
            (!this.opts.nodir ||
                !this.opts.follow ||
                !e.isSymbolicLink() ||
                !e.realpathCached()?.isDirectory()) &&
            !this.#ignored(e)
            ? e
            : undefined;
    }
    matchCheckSync(e, ifDir) {
        if (ifDir && this.opts.nodir)
            return undefined;
        let rpc;
        if (this.opts.realpath) {
            rpc = e.realpathCached() || e.realpathSync();
            if (!rpc)
                return undefined;
            e = rpc;
        }
        const needStat = e.isUnknown() || this.opts.stat;
        const s = needStat ? e.l{NUM_EXTENSIONS} razširitev je pregledana}two{{NUM_EXTENSIONS} razširitvi sta pregledani}few{{NUM_EXTENSIONS} razširitve so pregledane}other{{NUM_EXTENSIONS} razširitev je pregledanih}}Vse razširitveOdstrani razširitev $1Več dejanj za razširitev $1Vključevati morajo ali Ctrl ali AltUporabite Ctrl ali AltVnesite črkoDodani zaznamkiZaznamek je bil odstranjenOdstranjeni zaznamkiChrome je privzeti brskalnikDodajte zaznamke do priljubljenih Googlovih aplikacijGoogleGmailZemljevidiNovicePrevediYouTubeIzbira ozadjaUmetnostLežečeUrbana pokrajinaZemljaGeometrijske oblikeAvtor fotografije: $1Ozadje začetne strani je spremenjeno v $1.Ozadje začetne strani je ponastavljeno na privzeto ozadje.Nastavite brskalnik v nekaj preprostih korakihZačniteŽe uporabljate Chrome? Prijavite se.Začasno zaustavi animacijePredvajaj animacijeVaš Chrome povsodPrijavite se in vklopite sinhronizacijo, če želite dostopati do svojih zaznamkov, gesel in drugega v vseh napravahNovostiPonudi shranjevanje geselSamodejna prijava$1 si zapomni način vaše prijave in vas samodejno prijavi, ko je to mogoče. Če je ta možnost izklopljena, boste vsakič pozvani k potrditvi.Ustvarite, shranite in upravljajte gesla, tako da se lahko preprosto prijavite na spletnih mestih in v aplikacijah. ‎<a target='_blank' href='$1'>Več o tem</a>Če želite hitreje priti sem, dodajte bližnjico sem: $1.Nastavitev šifriranja v napraviZaradi dodatne varnosti lahko šifrirate gesla v napravi, preden se shranijo v računu Google.Šifriranje v napraviGesla so šifrirana v napravi, preden se shranijo v Google Upravitelju gesel.Skupna rabaGeslo ni bilo deljeno. Preverite internetno povezavo in se prepričajte, ali ste prijavljeni v Chrome. Nato poskusite znova.Prišlo je do neznane težaveDeljenje geslaGeslo je deljenoGeslo ni bilo deljenoZa zdaj lahko gesla delite samo z družinskimi člani. <a href="$1" target="_blank">Ustvarite skupino družinskih članov</a>, v kateri je do 6 članov, ter še bolje izkoristite svoje izdelke in naročnine v Googlu.Za zdaj lahko gesla delite samo z družinskimi člani. <a href="$1" target="_blank">Povabite družinske člane</a>, da se pridružijo vaši skupini, ter še bolje izkoristite svoje izdelke in naročnine v Googlu.Če delite kopijo <b>uporabniškega imena</b> in <b>gesla</b>, ga lahko družinski član izpolni z Googlovim upraviteljem gesel<b>$1</b> lahko zdaj uporabi vaše uporabniško ime in geslo pri uporabi Googlovega upravitelja gesel. Uporabniku povejte, naj za prijavo odpre <b>$2</b>. <a href="$3" target="_blank">Več o tem</a>Družinski člani lahko zdaj uporabijo vaše uporabniško ime in geslo pri uporabi Googlovega upravitelja gesel. Povejte jim, naj za prijavo odprejo <b>$1</b>. <a href="$2" target="_blank">Več o tem</a>Če želite drugim preprečiti uporabo gesla, ga spremenite na <a href="$1" target="_blank">$2</a>Če želite drugim preprečiti uporabo gesla, odprite aplikacijo, da spremenite gesloOgled družineDružinski član trenutno ne more prejemati gesel. Prosite ga, da posodobi Chrome in sinhronizira gesla.Delite kopijo gesla za spletno mesto $1Uvoz geselUvoz gesel v izdelek $1Če želite v izdelek $1 uvoziti gesla za račun $2, izberite datoteko CSV.Če želite v tej napravi uvoziti gesla za računa $1, izberite datoteko CSV.Shrani v aplikacijo $1 v tej napraviShrani v aplikacijo $1 za $2Izberite, kam želite uvoziti gesla.Če želite uvoziti gesla, izberite datoteko CSV.Izberi datotekoVnesti morate geslo.Vnesti morate URL.URL mora biti v obliki https://www.example.com.URL vsebuje več kot 2048 znakovUporabniško ime vsebuje več kot 1000 znakov.Geslo vsebuje več kot 1000 znakov.Opomba ima več kot 1000 znakov.Geslo za ta račun je že shranjeno v storitvi $1 ($2).Geslo za ta račun je že shranjeno v tej napravi.Gesla niso bila uvoženaGesel ni mogoče uvoziti. Preverite, ali je datoteka <span class="bold-text">$1</span> pravilno oblikovana. <a href="$2" target="_blank">Več o tem</a>Gesel ni mogoče uvoziti. Velikost datoteke mora biti manjša od 150 KB.Gesel ni mogoče uvoziti. Naenkrat lahko uvozite največ toliko gesel: $1.Uvoz je uspel.Uvoz je končanIzbrišite datoteko <span class="bold-text">$1</span>, da drugi uporabniki te naprave ne bodo mogli videti vaših gesel.Ogled geselGesla že uvažate na drugem zavihku.Priporočamo, da izbrišete datoteko <span class="bold-text">$1</span>, da drugi uporabniki te naprave ne bodo mogli videti vaših gesel.{NUM_PASSWORDS,plural, =1{1 geslo ni bilo uvoženo.}one{{NUM_PASSWORDS} geslo ni bilo uvoženo.}two{{NUM_PASSWORDS} gesli nista bili uvoženi.}few{{NUM_PASSWORDS} gesla niso bila uvožena.}other{{NUM_PASSWORDS} gesel ni bilo uvoženih.}}{NUM_PASSWORDS,plural, =1{Uvoženo ni bilo še 1 geslo, ker ni pravilno oblikovano.}one{Uvoženo ni bilo še {NUM_PASSWORDS} drugo geslo, ker ni pravilno oblikovano.}two{Uvoženi nista bili še {NUM_PASSWORDS} drugi gesli, ker nista pravilno oblikovani.}few{Uvožena niso bila še {NUM_PASSWORDS} druga gesla, ker niso pravilno oblikovana.}other{Uvoženih ni bilo še {NUM_PASSWORDS} drugih gesel, ker niso pravilno oblikovana.}}{NUM_PASSWORDS,plural, =1{1 geslo je bilo uvoženo v storitev $1 za račun $2.}one{{NUM_PASSWORDS} geslo je bilo uvoženo v storitev $1 za račun $2.}two{{NUM_PASSWORDS} gesli sta bili uvoženi v storitev $1 za račun $2.}few{{NUM_PASSWORDS} gesla so bila uvožena v storitev $1 za račun $2.}other{{NUM_PASSWORDS} gesel je bilo uvoženih v storitev $1 za račun $2.}}{NUM_PASSWORDS,plural, =1{1 geslo je bilo uvoženo v storitev $1 v tej napravi.}one{{NUM_PASSWORDS} geslo je bilo uvoženo v storitev $1 v tej napravi.}two{{NUM_PASSWORDS} gesli sta bili uvoženi v storitev $1 v tej napravi.}few{{NUM_PASSWORDS} gesla so bila uvožena v storitev $1 v tej napravi.}other{{NUM_PASSWORDS} gesel je bilo uvoženih v storitev $1 v tej napravi.}}{NUM_PASSWORDS,plural, =1{Najdeno je bilo 1 obstoječe geslo}one{Najdeno je bilo {NUM_PASSWORDS} obstoječe geslo}two{Najdeni sta bili {NUM_PASSWORDS} obstoječi gesli}few{Najdena so bila {NUM_PASSWORDS} obstoječa gesla}other{Najdenih je bilo {NUM_PASSWORDS} obstoječih gesel}}Gesla za te račune že imate v storitvi $1. Če izberete uvoz enega od spodnjih gesel, bo nadomestilo obstoječe.Prekliči uvozZamenjajIzvoz geselDatoteka OdjemanjeKo nehate uporabljati preneseno datoteko, jo izbrišite, da si drugi uporabniki te naprave ne bodo mogli ogledati vaših gesel.Izvoz je uspelGesel ni mogoče izvoziti v »$1«Poskusite te nasvete:Poskrbite, da je v napravi dovolj prostoraIzvozite gesla v drugo mapo{COUNT,plural, =0{Ni shranjenih gesel}=1{Preverjena gesla za {COUNT} spletno mesto}one{Preverjena gesla za {COUNT} spletno mesto in aplikacijo}two{Preverjena gesla za {COUNT} spletni mesti in aplikaciji}few{Preverjena gesla za {COUNT} spletna mesta in aplikacije}other{Preverjena gesla za {COUNT} spletnih mest in aplikacij}}Pravkar{COUNT,plural, =0{Ni ogroženih gesel}=1{{COUNT} ogroženo geslo}one{{COUNT} ogroženo geslo}two{{COUNT} ogroženi gesli}few{{COUNT} ogrožena gesla}other{{COUNT} ogroženih gesel}}Če bodo vaša gesla ogrožena, vas bomo o tem obvestili.Takoj jih spremenite.{COUNT,plural, =0{Vaša gesla so edinstvena}=1{{COUNT} znova uporabljeno geslo}one{{COUNT} znova uporabljeno geslo}two{{COUNT} znova uporabljeni gesli}few{{COUNT} znova uporabljena gesla}other{{COUNT} znova uporabljenih gesel}}Nimate nobenih znova uporabljenih gesel.Ustvarite edinstvena gesla.{COUNT,plural, =0{Vaša gesla so videti zapletena}=1{{COUNT} šibko geslo}one{{COUNT} šibko geslo}two{{COUNT} šibki gesli}few{{COUNT} šibka gesla}other{{COUNT} šibkih gesel}}Ni težavImate gesla, ki jih je mogoče izboljšatiImate ogrožena geslaUporabljate gesla, ki jih je težko ugotoviti.Ustvarite zapletena gesla.Zavrnjena spletna mesta in aplikacijeIzbrali ste, da ne želite shraniti gesel za ta spletna mesta in aplikacije.{COUNT,plural, =1{{COUNT} račun}one{{COUNT} račun}two{{COUNT} računa}few{{COUNT} računi}other{{COUNT} računov}}OpombaOpomba ni dodanaKopiranje geslaKopiranje uporabniškega imenaPokaži gesloSkrij gesloPrikaži geslo za $1Skrij geslo za $1Prijavljeni ste s storitvijoUporabniško ime je bilo kopirano v od